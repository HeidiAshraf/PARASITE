<div class="container">
  <mat-card>

      <mat-card-title>{{ studyPlan.title }}
        <app-star-rating
          *ngIf="type === 'published'"
          [rating]="rating"
          [starCount]="starCount"
          [color]="starColor"
          (ratingUpdated)="onRatingChanged($event)"
          style="float: right;">
        </app-star-rating>
      </mat-card-title>

    <br />
    <app-calendar-header
      [(view)]="view"
      [(viewDate)]="viewDate"
      (viewDateChange)="fetchEvents()"
      (viewChange)="fetchEvents()">
    </app-calendar-header>
    <div [ngSwitch]="view">
      <mwl-calendar-month-view
        *ngSwitchCase="'month'"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        [activeDayIsOpen]="activeDayIsOpen"
        (dayClicked)="dayClicked($event.day)"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)">
      </mwl-calendar-month-view>

      <mwl-calendar-week-view
        *ngSwitchCase="'week'"
        [viewDate]="viewDate"
        [events]="events">
      </mwl-calendar-week-view>

      <mwl-calendar-day-view
        *ngSwitchCase="'day'"
        [viewDate]="viewDate"
        [events]="events">
      </mwl-calendar-day-view>
    </div>
  </mat-card>
  <mat-card label="Content Preview">
    <div class="ql-editor preview" [innerHTML]="this.sanitizer.bypassSecurityTrustHtml(description)"></div>
  </mat-card>
  <mat-card>
      <div class="button-row">
          <button mat-raised-button (click)="publish()" color="primary" *ngIf="type === 'personal' && !currIsChild">Publish</button>
          <button mat-raised-button (click)="copy()" color="primary"*ngIf="!currIsChild">Copy</button>
          <button  mat-raised-button (click)="assign()" color="primary" *ngIf="!currIsChild">Assign</button>
          <button mat-raised-button (click)="unAssign()" color="primary" *ngIf="!currIsChild">Unassign</button>
          <button mat-raised-button (click)="edit()" color="primary" *ngIf="type === 'personal' && !currIsChild">Edit</button>

          <!-- <button mat-raised-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu"  >
            <button mat-menu-item (click)="assign()" *ngFor="let child of listOfChildren">
              {{child }}
          </button>
          </mat-menu> -->

        </div>
  </mat-card>
</div>
